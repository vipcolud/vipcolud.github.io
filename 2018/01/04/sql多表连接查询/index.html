
<!DOCTYPE html>
<html lang="zh-Hans" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BELONG&#39;s Blog</title>

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate" />
    <meta name="keywords" content="belongapp,"> 
    <meta name="description" content="专注于后端开发,"> 
    <meta name="author" content="BELONG"> 
    <link rel="alternative" href="atom.xml" title="BELONG&#39;s Blog" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 






    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <link rel="stylesheet" href="/css/diaspora.css">



    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?2c17dd32817c94173b19c2a392bb97e9";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>
 <script>
  (function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/0f81ff2f.js","daovoice")
  daovoice('init', {
      app_id: "4acee80f"
    });
  daovoice('update');
  </script>




</head>

<body class="loading">
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="icon-home image-icon" href="javascript:;"></a>
    <div title="播放/暂停" class="icon-play"></div>
    <h3 class="subtitle">SQL多表连接查询（详细实例）</h3>
    <div class="social">
        <!--<div class="like-icon">-->
            <!--<a href="javascript:;" class="likeThis active"><span class="icon-like"></span><span class="count">76</span></a>-->
        <!--</div>-->
        <div>
            <div class="share">
                <a title="获取二维码" class="icon-scan" href="javascript:;"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>
    <div class="section">
        <div class="article">
    <div class='main'>
        <h1 class="title">SQL多表连接查询（详细实例）</h1>
        <div class="stuff">
            <span>一月 04, 2018</span>
            

            <span id="busuanzi_container_page_pv">
   本文总阅读量<span id="busuanzi_value_page_pv"></span>次
</span>
        </div>
        <div class="content markdown">
            <p>新建两张表：<br>表1：student  截图如下：<br><img src="http://img.xker.com/xkerfiles/allimg/1207/11302UD1-0.jpg" alt="此处输入图片的描述"><br>表2：course  截图如下：<br><img src="http://www.xker.com/xkerfiles/allimg/1207/11302UZ3-1.jpg" alt="此处输入图片的描述"><br>（此时这样建表只是为了演示连接SQL语句，当然实际开发中我们不会这样建表，实际开发中这两个表会有自己不同的主键。）<br>一、外连接<br>外连接可分为：左连接、右连接、完全外连接。<br>1、左连接  left join 或 left outer join<br>SQL语句：select <em> from student left join course on student.ID=course.ID<br>执行结果：<br><img src="http://www.xker.com/xkerfiles/allimg/1207/11302RN1-2.jpg" alt="此处输入图片的描述"><br>左外连接包含left join左表所有行，如果左表中某行在右表没有匹配，则结果中对应行右表的部分全部为空(NULL).<br>注：此时我们不能说结果的行数等于左表数据的行数。当然此处查询结果的行数等于左表数据的行数，因为左右两表此时为一对一关系。<br><a id="more"></a><br>2、右连接  right join 或 right outer join<br>SQL语句：select </em> from student right join course on student.ID=course.ID<br>执行结果：<br><img src="http://www.xker.com/xkerfiles/allimg/1207/11302UZ3-1.jpg" alt="此处输入图片的描述"><br>右外连接包含right join右表所有行，如果左表中某行在右表没有匹配，则结果中对应左表的部分全部为空(NULL)。<br>注：同样此时我们不能说结果的行数等于右表的行数。当然此处查询结果的行数等于左表数据的行数，因为左右两表此时为一对一关系。<br>3、完全外连接  full join 或 full outer join<br>SQL语句：select <em> from student full join course on student.ID=course.ID<br>执行结果：<br><img src="http://www.xker.com/xkerfiles/allimg/1207/11302T123-4.jpg" alt="此处输入图片的描述"><br>完全外连接包含full join左右两表中所有的行，如果右表中某行在左表中没有匹配，则结果中对应行右表的部分全部为空(NULL)，如果左表中某行在右表中没有匹配，则结果中对应行左表的部分全部为空(NULL)。<br>二、内连接  join 或 inner join<br>SQL语句：select </em> from student inner join course on student.ID=course.ID<br>执行结果：<br><img src="http://www.xker.com/xkerfiles/allimg/1207/11302W1H-5.jpg" alt="此处输入图片的描述"><br>inner join 是比较运算符，只返回符合条件的行。<br>此时相当于：select <em> from student,course where student.ID=course.ID<br>三、交叉连接 cross join<br>1.概念：没有 WHERE 子句的交叉联接将产生连接所涉及的表的笛卡尔积。第一个表的行数乘以第二个表的行数等于笛卡尔积结果集的大小。<br>SQL语句：select </em> from student cross join course<br>执行结果：<br><img src="http://www.xker.com/xkerfiles/allimg/1207/11302T056-6.jpg" alt="此处输入图片的描述"><br>如果我们在此时给这条SQL加上WHERE子句的时候比如SQL:select * from student cross join course where student.ID=course.ID<br>此时将返回符合条件的结果集，结果和inner join所示执行结果一样。<br>四、两表关系为一对多，多对一或多对多时的连接语句<br>当然上面两表为一对一关系，那么如果表A和表B为一对多、多对一或多对多的时候，我们又该如何写连接SQL语句呢？<br>其实两表一对多的SQL语句和一对一的SQL语句的写法都差不多，只是查询的结果不一样，当然两表也要略有改动。<br>比如表1的列可以改为：<br>Sno Name Cno<br>表2的列可以改为：<br>Cno CName<br>这样两表就可以写一对多和多对一的SQL语句了，写法和上面的一对一SQL语句一样。<br>下面介绍一下当两表为多对多的时候我们该如何建表以及些SQL语句。<br>新建三表：<br>表A:  student 截图如下：<br><img src="http://www.xker.com/xkerfiles/allimg/1207/11302R402-7.jpg" alt="此处输入图片的描述"><br>表B:  course 截图如下：<br><img src="http://www.xker.com/xkerfiles/allimg/1207/11302U042-8.jpg" alt="此处输入图片的描述"><br>表C:  student_course 截图如下：<br><img src="http://www.xker.com/xkerfiles/allimg/1207/11302V5b-9.jpg" alt="此处输入图片的描述"><br>一个学生可以选择多门课程，一门课程可以被多个学生选择，因此学生表student和课程表course之间是多对多的关系。<br>当两表为多对多关系的时候，我们需要建立一个中间表student_course，中间表至少要有两表的主键，当然还可以有别的内容。<br>SQL语句：select s.Name,C.Cname from student_course as sc left join student as s on s.Sno=sc.Sno left join course as c on c.Cno=sc.Cno<br>执行结果：<br><img src="http://www.xker.com/xkerfiles/allimg/1207/11302WE7-10.jpg" alt="此处输入图片的描述"><br>此条SQL执行的结果是学生选课的情况。</p>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="false">
                <source type="audio/mpeg" src="https://music.163.com/#/song?id=299258">
            </audio>
        </div>
        
    <div id='gitalk-container' class="comment link"
        data-ae='true'
        data-ci='c27524ff7fa274a5f47a'
        data-cs='9ca2b17a9a49906b5f3ee758825c4d45a7e4ece4'
        data-r='vipcolud.github.io'
        data-o='vipcolud'
        data-a='vipcolud'
        data-d='false'
    >查看评论</div>


    </div>
    
</div>


    </div>
</div>
</body>
<script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/diaspora.js"></script>
<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">
<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>




</html>